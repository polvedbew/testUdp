import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.binary.Hex;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;
import java.nio.charset.StandardCharsets;
import java.time.*;

/**
 * ----------------------*    Norden Communication    *-------------------------
 * Created on 30/09/2022
 * R&D SCK
 * -----------------------------------------------------------------------------
 **/
public class Test {
    //4 door


    //  static String first="2420398e5000000000000000e7813819008102000d7e1e001e001e001e0001030303000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    //  static String sec="2010c81a5100000000000000e781381900810200ffffffff";

    //  static String first="2420add75800000000000000e7813819008102000d7e1e001e001e001e0002030303000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";



    //  static String sec="2420398e5000000000000000e7813819008102000d7e1e001e001e001e0001030303000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    //  static String sec="242040175200000000000000e7813819008102000d7e1e001e001e001e0003010303000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    //  static String sec="242070955400000000000000e7813819008102000d7e1e001e001e001e0003030103000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    //   static String sec="242027905600000000000000e7813819008102000d7e1e001e001e001e0003030301000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";


    //  static String sec="2040bbef2700000000000000e78138190081020001000000ffffffffffffffff01000000";
    //                2040b____b0b2500000000000000____e7813819____0081020001000000ffffffffffffffff0____0000000
    //                2040b____bef2700000000000000____e7813819____0081020001000000ffffffffffffffff0____1000000
    //                2040b____ce32900000000000000____e7813819____0081020001000000ffffffffffffffff0____2000000
    //                2040b____c072b00000000000000____e7813819____0081020001000000ffffffffffffffff0____3000000


    // static String sec="2420add75800000000000000e7813819008102000d7e1e001e001e001e0002030303000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    //  static String sec="242036a65a00000000000000e7813819008102000d7e1e001e001e001e0003020303000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    //   static String sec="242067075c00000000000000e7813819008102000d7e1e001e001e001e0003030203000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    //   static String sec="24204b235e00000000000000e7813819008102000d7e1e001e001e001e0003030302000000000102030400000000ff00ff000000000008fa006400ff55011e00007e1e1effffffffffffffffffffffff000432ffffffffffffffffffffff8494ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0a80000ffff0000c0a8000060ea000000000000010027001e00020027001e00040027001e0010000038b80b0a00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffff49ee4aee000000000000ffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

    private static final String four="e7813819";
    private static final String two="1a9e4d0d";
    private static DatagramSocket socket;

    public static void main(String args[]) throws SocketException {
        socket= new DatagramSocket(60000);

        for(int i=0 ;i<20;i++){
            try{
                Thread.sleep(3000);
            }catch (Exception e){
                //
            }
            start();
        }
    }

    private static void start(){
        String sec=getStatusString(4,four);
        // String sec=getDoorOpenString(1,two);

        try {

            char[] chars = sec.toCharArray();
            //StringBuilder hex = new StringBuilder();
            //  for (char ch : chars) {
            //  hex.append(Integer.toHexString((int) ch));
            //   }

            byte[] bytes = Hex.decodeHex(sec.toCharArray());
            // System.out.println(new String(bytes, "UTF-8"));

            DatagramPacket packet = new DatagramPacket(bytes,bytes.length);
            packet.setAddress(InetAddress.getByName("255.255.255.255"));
            packet.setPort(60000);
            socket.send(packet);

            //while(true){
            // socket.receive(packet);
            int count=2;
            while(count -- >0){
                receive();

            }
            try {
                System.out.println(Hex.encodeHex(packet.getData(),false));
                System.out.println(packet.getData().toString());
            }catch (Exception e){
                //
            }



        } catch (SocketException e) {
            throw new RuntimeException(e);
        } catch (IOException e) {
            throw new RuntimeException(e);
        } catch (DecoderException e) {
            throw new RuntimeException(e);
        }

    }

    private static void receive(){
        byte[] buf=new byte[1500];
        DatagramPacket packet = new DatagramPacket(buf,buf.length);
        try {
            socket.receive(packet);
        } catch (Exception e) {
            //
        }
        //  char[] ary=Hex.encodeHex(buf);
        String rec = new String(packet.getData(), StandardCharsets.UTF_8);
        String ary2=Hex.encodeHexString(buf);

        if(!rec.isBlank()) {
            // System.out.println("Receive1 :::: " + rec);
            //   System.out.println("Receive2 :::: " + ary);
            System.out.println("Receive3 :::: " + ary2);
            // String cn=ary2.substring(136,142);
            //String cnv=cn.substring(4)+cn.substring(2,4)+cn.substring(0,2);
            //System.out.println("Receive3 :::: " + Long.parseLong(cnv,16));
            InetAddress addr = packet.getAddress();
            int prt = packet.getPort();

            System.out.println("####RSP###  " + addr + ":" + prt + "  ");
            process(ary2);
        }
    }

    private static void process(final String s){
        OldLog[] log=new OldLog[10];
        LocalDate ld=LocalDate.now();
        String mm=String.valueOf(ld.getMonthValue());
        String dd=String.valueOf(ld.getDayOfMonth()+1);
        if(ld.getMonthValue()/10==0){
            mm="0"+mm;
        }
        if(ld.getDayOfMonth()/10==0){
            dd="0"+dd;
        }
        String nowTm=String.valueOf(ld.getYear()-2000)+mm+dd;
        //System.out.println(nowTm);
        final int strt=40;
        String timeStamp=s.substring(strt,strt+6);
        System.out.println(timeStamp  +"   from status update");


        final int start=124;
        final int lng=40;
        for(int i=0;i<10;i++){
            final int frm=start+(i*lng);
            final String stmp=s.substring(frm,frm+lng);
            System.out.println(stmp);

            OldLog olo=new OldLog();


            String srn=stmp.substring(4,8);
            srn=srn.substring(2,4)+srn.substring(0,2);
            final int srnm=Integer.parseInt(srn,16);
            olo.logNo=srnm;

            String cno=stmp.substring(12,18);
            long lncrn=Long.parseLong(cno.substring(4,6)+cno.substring(2,4)+cno.substring(0,2),16);
            olo.cardNo=String.valueOf(lncrn);
            olo.doorNo=Integer.parseInt(stmp.substring(39,40));
            String dttm="2d6e0010";//stmp.substring(28,36);


            String tme=stmp.substring(32,36);
            tme=String.valueOf(tme.charAt(3))+String.valueOf(tme.charAt(2))+String.valueOf(tme.charAt(1))+String.valueOf(tme.charAt(0));
            long secs=Long.parseLong(tme,16);
            double sss=secs*1.318359375;
            int hr=(int)(sss/3600);
            int mn=(int)(sss%3600)/60;
            LocalTime tm=LocalTime.ofSecondOfDay((long)sss);



            final long dttmStmp=Long.parseLong(dttm,16);
            LocalDateTime dt=LocalDateTime.ofEpochSecond(dttmStmp,0, ZoneOffset.UTC);

            System.out.println(olo.logNo+": "+"   tmstmp="+tme+"   "+frm+"   "+(frm+lng)+"    "+tme+":"+secs+"    y="+dt.getYear()+"  m="+dt.getMonthValue()+"  d="+dt.getDayOfMonth()+"  h="+tm.getHour()+"  m="+tm.getMinute()+"  s="+tm.getSecond());
            log[i]=olo;
        }
        System.out.println("received value="+s);
        for(OldLog st:log){
            System.out.println(st.logNo+"     "+st.cardNo+"  "+st.doorNo+"   yr:"+st.year);
        }


        //0      7     11      17          27   31         39
        //00006502__0000__f8f48c__0000000000-6e2d-010000"0"3"
    }




    private static String getStatusString(int type, String serial){
        String ts="";

        switch (type){
            case 1:ts="____";break;
            case 2:ts="470f9b09";break;
            case 4:ts="0b978802";break;

        }
        ts="3b2d080c";
        ts="f387050c";
        ts="ae12040c";
        ts="ae12040c";
        ts="1060200c";

        // return "2020"+ts+"000000000000"+serial+"00000200ffffffff0f000000";
      //  return "2020"+ts+"000000000000"+serial+"00000200ffffffff0f000000";
        //   return "1794"+"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"; //search
        //  return "1790"+"0000"+serial+"c0a80165"+"ea60"+"000000000000000000000000000000000000"; //search
       //   return "2440e10f0500000000000000ffffffff00000200"; //zsfg
        return "1790"+"0000"+serial+"ffffffff"+"ae06"+"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"; //search
      //  return "17200000"+serial+"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
    }

    //     2440e10f0500000000000000ffffffff00000200
     //   17940000     e7813819     c0a8010e      ffff      ff00      c0a801      01      0066      19 38 81 e7       06 62 20 15 12 15 000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
    //    17200000     e7813819     6f02000001010401f8f48c00     202211150418290101010101000000000010355500000000000000000000002211200

    //    17200000     1a9e4d0d     fe0100000201010101000000     202211171321252c000100000000000000144943000000000000000000000022111700000000000000000000

//2020__145ddd00__000000000000__4aec5707__00000200ffffffff0f000000

//2020__0b978802__000000000000__e7813819__00000200ffffffff0f000000



    private static String getDoorOpenString(int door, String serial){
        String ds="";

        switch (door){
            case 0:ds="01";break;
            case 1:ds="02";break;
            case 2:ds="03";break;
            case 3:ds="04";break;
        }
        return "17400000"+serial+ds+"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

        // return "2040b"+ds+"00000000000000"+serial+"0081020001000000ffffffffffffffff0"+door+"000000";
    }

    static class OldLog{
        int logNo=-1;
        int doorNo=-1;
        String cardNo="";
        int year=-1;
        int month=-1;
        int day=-1;
        int hour=-1;
        int minute=-1;
        int second=-1;
        int status=-1;
    }


}

//door open
//                2040____bb0b25____00000000000000____e7813819____0081020001000000ffffffffffffffff____00000000
//                2040____bbef27____00000000000000____e7813819____0081020001000000ffffffffffffffff____01000000
//                2040____bce329____00000000000000____e7813819____0081020001000000ffffffffffffffff____02000000
//                2040____bc072b____00000000000000____e7813819____0081020001000000ffffffffffffffff____03000000

//door open uk
//                2040____3a7d9a____00000000000000____91793819____0000020001000000ffffffffffffffff____00000000
//                2040____38a99c____00000000000000____91793819____0000020001000000ffffffffffffffff____01000000
//                2040____39f59e____00000000000000____91793819____0000020001000000ffffffffffffffff____02000000
//                2040____2441a0____00000000000000____91793819____0000020001000000ffffffffffffffff____03000000


//monitor
//                2020____145ddd00____000000000000____4aec5707____00000200ffffffff0____f000000
//                2020____5694a300____000000000000____91793819____00000200ffffffff0____f000000   uk

//2021953f88020000__e7813819__000000006f060200__221115__02054117__00561d04000000000000904c006f020000020000000000000000000000f00000000000     ___00006e02__0000__f8f48c__0000000000-6f2d-4e2208"0"3"     ___00006d0200002e874200000000006f2d8320080300006c0200002e874200000000006f2dfab2080300006b0200002e874200000000006f2da6b2000300006a020000f8f48c00000000006f31c4a100030000690200005c926f00000000006f2fc2a108930000680200002e874200000000006f2985a10803000067020000f8f48c00000000006f2b38a10803000066020000f8f48c00000000006e2d61bf0003000065020000f8f48c00000000006e2d01000003000000000000000000000000000000000000120000000000000000000000110000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff1f1386ffcbff1fff0fff1b003e6f2b37a10000484541443e3c00000000000000000000000

//uk
//2021ac57a3000000__91793819__0000000001060200__221116__03104735__00593300000000000000904c0013000000000000000000000000000000f00000000000     ---00001200__0000__010000__0000000000-702d-ce550e"1"3"     ___0000110000000100000000000000702dcc550e120000100000000100000000000000702dcb55061100000f0000000100000000000000702dc955061000000e0000003e612300000000003028a243089300000d0000003e612300000000003028a243089300000c0000003e612300000000003028a243009300000b0000003e612300000000003028a143009200000a0000003e612300000000003028a04308920000090000003e612300000000003028a0430892000000000000000000000000000000000000000000000000000000000000000000000f0000000000000000000000f0ffff000000000000000000000000000000000068000000ff8fff1f1380ffcbff1fff0fff1f003e702df5540000000000000000


// 4 door time==0.0.2
//2021075188020000__e7813819__000000002f060200__221114__01000042__000cc201000000000000904c0066020000020000000000000000000000f00000000000     ___00006502__0000__f8f48c__0000000000-6e2d-010000"0"3"     ___000064020000f8f48c00000000006e2d0b340003000063020000f8f48c00000000006e2df7330003000062020000f8f48c00000000006e2df0330803000061020000f8f48c00000000006e2dcf3308030000600200002e874200000000006e2df131080300005f0200002e874200000000006e2d9b2c080300005e020000f8f48c00000000006e2d7a2c080300005d020000f8f48c00000000006e2d072c000300005c0200002e874200000000006e2d4d2a0893000000000000000000000000000000000000120000000000000000000000090000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff1f1380ffcbff1fff0fff1b003e6e2d5d3200006520636f6e74
// 4 door time==23.59.2
//20210a2388020000__e7813819__0000000071060200__221114__01235929__0006cf01000000000000904c0067020000020000000000000000000000f00000000000     ___00006602__0000__f8f48c__0000000000-6e2d-61bf00"0"3"     ___000065020000f8f48c00000000006e2d01000003000064020000f8f48c00000000006e2d0b340003000063020000f8f48c00000000006e2df7330003000062020000f8f48c00000000006e2df0330803000061020000f8f48c00000000006e2dcf3308030000600200002e874200000000006e2df131080300005f0200002e874200000000006e2d9b2c080300005e020000f8f48c00000000006e2d7a2c080300005d020000f8f48c00000000006e2d072c00030000000000000000000000000000000000001200000000000000000000000a0000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff1f1380ffcbff1fff0fff1f003e6e2d5d320000696f6e207661

//4 door con ,door#4 , allow
//20211ee1f43b0000__e7813819__000000005d060200__221114__01063222__00f43b00000000000000904c0064020000020000000000000000000000f00800000000     ___00006402__0000__f8f48c__0000000000-6e2d-0b3400"0"3"     ___00006302__0000__f8f48c__0000000000-6e2d-f73300"0"3"     ___000062020000__f8f48c__0000000000-6e2d-f0330803000061020000f8f48c00000000006e2dcf3308030000600200002e874200000000006e2df131080300005f0200002e874200000000006e2d9b2c080300005e020000f8f48c00000000006e2d7a2c080300005d020000f8f48c00000000006e2d072c000300005c0200002e874200000000006e2d4d2a089300005b0200005c926f00000000006e2deb280893000000000000000000000000000000000000120000000000000000000000080000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff1f1380ffcbff1fff0fff1e003e6e2d5d3200006520636f6e74
//2021e3b888020000__e7813819__0000000021060200__221114__01061557__00e94c03000000000000904c0061020000020000000000000000000000f00000000000     ___00006002__0000__2e8742__0000000000-6e2d-f13108"0"3"     ___00005f02__0000__2e8742__0000000000-6e2d-9b2c08"0"3"     ___00005e020000__f8f48c__0000000000-6e2d-7a2c080300005d020000f8f48c00000000006e2d072c000300005c0200002e874200000000006e2d4d2a089300005b0200005c926f00000000006e2deb28089300005a0200002e874200000000006e2d2c2800930000590200002e874200000000006e2df41c0092000058020000a6004500000000006a2dca8208920000570200008ce74400000000006a2dc9820092000000000000000000000000000000000000120000000000000000000000040000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc18000074656e742d4c
//2021996f88020000__e7813819__000000002f060200__221114__01053707__00469f02000000000000904c0060020000020000000000000000000000f00000000000     ___00005f02__0000__2e8742__0000000000-6e2d-9b2c08"0"3"     ___00005e02__0000__f8f48c__0000000000-6e2d-7a2c08"0"3"     ___00005d020000__f8f48c__0000000000-6e2d-072c000300005c0200002e874200000000006e2d4d2a089300005b0200005c926f00000000006e2deb28089300005a0200002e874200000000006e2d2c2800930000590200002e874200000000006e2df41c0092000058020000a6004500000000006a2dca8208920000570200008ce74400000000006a2dc98200920000560200008ce74400000000006a2db6820892000000000000000000000000000000000000120000000000000000000000030000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc1800006520636f6e74
//2021d99788020000__e7813819__000000002f060200__221114__01053226__00528a02000000000000904c005e020000010000000000000000000000f00000000000     ___00005d02__0000__f8f48c__0000000000-6e2d-072c00"0"3"     ___00005c02__0000__2e8742__0000000000-6e2d-4d2a08"9"3"     ___00005b020000__5c926f__0000000000-6e2d-eb28089300005a0200002e874200000000006e2d2c2800930000590200002e874200000000006e2df41c0092000058020000a6004500000000006a2dca8208920000570200008ce74400000000006a2dc98200920000560200008ce74400000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d43820092000000000000000000000000000000000000120000000000000000000000010000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc1800006520636f6e74
//4 door con ,door#4 , deny
//2021455d88020000__e7813819__0000000021060200__221114__01051843__000d4d02000000000000904c005d020000000000000000000000000000f00000000000     ___00005c02__0000__2e8742__0000000000-6e2d-4d2a08"9"3"     ___00005b02__0000__5c926f__0000000000-6e2d-eb2808"9"3"     ___00005a020000__2e8742__0000000000-6e2d-2c2800930000590200002e874200000000006e2df41c0092000058020000a6004500000000006a2dca8208920000570200008ce74400000000006a2dc98200920000560200008ce74400000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d40820892000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc1800006974206e616d
//2021752688020000__e7813819__000000002f060200__221114__01050738__00781b02000000000000904c005c020000000000000000000000000000f00000000000     ___00005b02__0000__5c926f__0000000000-6e2d-eb2808"9"3"     ___00005a02__0000__2e8742__0000000000-6e2d-2c2800"9"3"     ___000059020000__2e8742__0000000000-6e2d-f41c0092000058020000a6004500000000006a2dca8208920000570200008ce74400000000006a2dc98200920000560200008ce74400000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d32820892000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc1800006520636f6e74
//2021fc9e88020000__e7813819__0000000021060200__221114__01050137__008b0002000000000000904c005b020000000000000000000000000000f00000000000     ___00005a02__0000__2e8742__0000000000-6e2d-2c2800"9"3"     ___00005902__0000__2e8742__0000000000-6e2d-f41c00"9"2"     ___000058020000__a60045__0000000000-6a2d-ca8208920000570200008ce74400000000006a2dc98200920000560200008ce74400000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d328208920000510200008ce74400000000006a2d31820892000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc18000074656e742d4c

//4 door con ,door#3
//2021c05688020000__e7813819__0000000021060200__221114__01044609__006bbb01000000000000904c005a020000000000000000000000000000f00000000000     ___00005902__0000__2e8742__0000000000-6e2d-f41c00"9"2"     ___00005802__0000__a60045__0000000000-6a2d-ca8208"9"2"     ___000057020000__8ce744__0000000000-6a2d-c98200920000560200008ce74400000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d328208920000510200008ce74400000000006a2d318208920000500200008ce74400000000006a2d2f820092000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc18000074656e742d4c
//20215f2d88020000__e7813819__000000006f060200__221114__01043827__000b9901000000000000904c005a020000000000000000000000000000f00000000000     ___00005902__0000__2e8742__0000000000-6e2d-f41c00"9"2"     ___00005802__0000__a60045__0000000000-6a2d-ca8208"9"2"     ___000057020000__8ce744__0000000000-6a2d-c98200920000560200008ce74400000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d328208920000510200008ce74400000000006a2d318208920000500200008ce74400000000006a2d2f820092000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6e2ddc180000484541443e3c

//20210a3b88020000__e7813819__0000000001060200__221114__01042243__00b55201000000000000904c005a020000000000000000000000000000f00000000000     ___00005902__0000__2e8742__0000000000-6e2d-f41c00"9"2"     ___00005802__0000__a60045__0000000000-6a2d-ca8208"9"2"     ___000057020000__8ce744__0000000000-6a2d-c98200920000560200008ce74400000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d328208920000510200008ce74400000000006a2d318208920000500200008ce74400000000006a2d2f820092000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1f003e6e2ddc180000000000000000





//202112488a020000e7813819000000002f060200__221110__04162223__00eabd00000000000000904c0059020000000000000000000000800c00f00000000000     ___00005802__0000__a60045__0000000000_6a2d_ca8208"9"2"     ___00005702__0000__8ce744__0000000000-6a2d-c98200"9"2"     ___000056020000__8ce744__00000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d328208920000510200008ce74400000000006a2d318208920000500200008ce74400000000006a2d2f82009200004f0200008ce74400000000006a2d06820892000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1f003e6a2dfb7c0000ffffffffffff
//2021c914b9bd0000e7813819000000002f060200__221110__04162221__00b9bd00000000000000904c0058020000000000000000000000800c00f00000000000     ___00005802__0000__a60045__0000000000_6a2d_ca8208"9"2"     ___00005702__0000__8ce744__0000000000-6a2d-c98200"9"2"     ___000056020000__8ce744__00000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d328208920000510200008ce74400000000006a2d318208920000500200008ce74400000000006a2d2f82009200004f0200008ce74400000000006a2d06820892000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1b003e6a2dfb7c00000000462d8911
//20211aa0b9bd0000e7813819000000002f060200__221110__04162221__00b9bd00000000000000904c0058020000000000000000000000800c00f00000000000     ___00005802__0000__a60045__0000000000_6a2d_ca8208"9"2"     ___00005702__0000__8ce744__0000000000-6a2d-c98200"9"2"     ___000056020000__8ce744__00000000006a2db68208920000550200008ce74400000000006a2d458200920000540200008ce74400000000006a2d438200920000530200008ce74400000000006a2d408208920000520200008ce74400000000006a2d328208920000510200008ce74400000000006a2d318208920000500200008ce74400000000006a2d2f82009200004f0200008ce74400000000006a2d06820892000000000000000000000000000000000000120000000000000000000000000000004c0200000200000000000000f0ffff000000000000000000000000000000000000000000ff8fff3f1386ffcbff1fff0fff1f003e6a2dfb7c00005cd3547d5011